function ap_default(a,b){return"undefined"!=typeof a?a:b}function apLoadingDot(){i=0,setInterval(function(){jQuery(".ap-loading-dot").html(Array(++i%4+1).join("."))},300)}function apAjaxData(a){return a+="&action=ap_ajax"}function apQueryStringToJSON(a){var b=a.split("&"),c={};return b.forEach(function(a){a=a.split("="),c[a[0]]=encodeURIComponent(a[1]||"")}),JSON.parse(JSON.stringify(c))}function apGetValueFromStr(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(a);return null==d?!1:decodeURIComponent(d[1].replace(/\+/g," "))}function apCenterBox(a){var a=jQuery(a),b=a.parent();b.css({position:"relative"}),a.css("left",(b.width()-a.width())/2),a.css("top",(b.height()-a.height())/2)}function apIsJsonString(a){try{JSON.parse(a)}catch(b){return!1}return!0}function apLoadCssJs(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a)}else if("css"==b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}"undefined"!=typeof c&&document.getElementsByTagName("head")[0].appendChild(c)}function apLoadTemplate(a,b,c){c=c||!1,"undefined"==typeof window.apTemplates&&(window.apTemplates={}),"undefined"==typeof window.apTemplates[a]&&jQuery.get(b,function(d){window.apTemplates[a]=d,jQuery(window.apTemplates[a]).trigger(a,b),c&&c(d)}),c&&c(window.apTemplates[a])}function apParseRepeatTag(a,b,c){var d="";return jQuery.each(b[c[1]],function(b,e){newdata={},newdata[c[0]]={},newdata[c[0]]=jQuery.extend({},e),d+=apParseTemplate(!1,newdata,!1,a)}),d}function apParseLoopInTemplate(a,b){return 0===jQuery("<div>"+a+"</div>").find("[ap-repeat]").length?a:(jQuery("<div>"+a+"</div>").find("[ap-repeat]").each(function(c,d){var e=jQuery(d).prop("outerHTML"),f=jQuery(d).attr("ap-repeat"),g=f.split(" in ");g=jQuery.map(g,jQuery.trim);var h=jQuery(d).html(),i=apParseRepeatTag(h,b,g);jQuery(d).html(i),jQuery(d).removeAttr("ap-repeat");var j=jQuery(d).prop("outerHTML");a=jQuery(a).prop("outerHTML"),a=a.replace(e,j)}),a)}function apParseHideInTemplate(a,b){return 0===jQuery(a).find("[ap-hide]").length?a:(jQuery(a).find("[ap-hide]").each(function(b,c){var d=jQuery(c).prop("outerHTML"),e=jQuery(c).attr("ap-hide"),f=new Function(e);if(f()){jQuery(c).hide(),jQuery(c).removeAttr("ap-hide");var g=jQuery(c).prop("outerHTML");a=a.replace(d,g)}}),a)}function apParseTemplate(a,b,c,d){if(a=a||!1,c=c||!1,d=d||!1,"undefined"==typeof window.apTemplates&&(window.apTemplates={}),a&&!d)var e=window.apTemplates[a]||"";else var e=d;return""===e?!1:(e=apParseLoopInTemplate(e,b),e=e.replace(/\{([\w\.]*)\}/g,function(a,c){for(var d=c.split("."),e=b[d.shift()],f=0,g=d.length;g>f;f++)e=e[d[f]];return"undefined"!=typeof e&&null!==e?e:""}),e=apParseHideInTemplate(e,b),c&&c(e),e)}!function(a){a.fn.aptip=function(b){function c(b){"undefined"!=typeof a(b).attr("title")&&(a(b).data("aptiptitle",a(b).attr("title")),a(b).removeAttr("title"))}function d(b){var c=a(window).height(),d=a(b).offset(),e=a(b).outerHeight(),g=a(b).outerWidth(),h=a(b).data("tipposition")||!1,i=f.position.split(/ +/);h&&(i=h.split(/ +/));var j="top";switch(i[0]){case"bottom":j=d.top+e+10;break;case"center":j=d.top+e/2-tip.outerHeight()/2;break;default:j=d.top-tip.outerHeight()-10}var k="right";switch(i[1]){case"left":k=d.left-g;break;case"center":k=d.left+g/2-tip.outerWidth()/2;break;default:k=d.left+g}tip.addClass("x-"+i[0]+" y-"+i[1]);var l=a(document).scrollTop();0>k&&(k=5),l>j&&(j=d.top+g);var m=a(window).scrollTop()+c-tip.outerHeight();j>m&&(j-=tip.outerHeight()),tip.css({overflow:"absolute",top:j,left:k}),tip.find(".arrow").css({top:j,left:k})}function e(b){var e=a(b),h=e.data("userid")||e.data("catid")||!1,i=(e.data("action")||!1,e.data("tipquery")||!1);if(h&&!i){var j=e.data("catid")||!1;j=j?"&type=cat":"",e.data("tipquery","action=ap_ajax&ap_ajax_action=hover_card&id="+h+j),i=e.data("tipquery")}if(i!==!1&&(f.ajax=i),c(b),""==f.title)var k=e.data("aptiptitle");else var k=f.title;if(0!=k.length){if(tip=a('<div class="ap-tooltip '+f.theme+'"><div class="ap-tooltip-in">'+k+"</div></div>"),""!=f.ajax&&!g.ajax_running)if(0==a(e.attr("data-ajax")).length&&0==a("#"+h+"_card").length)g.ajax_running=!0,a.ajax({type:"POST",url:ajaxurl,data:f.ajax+"&ap_ajax_nonce="+ap_nonce,success:function(c){var f=a(c),c={},h=f.filter("#ap-response").html();"undefined"!=typeof h&&h.length>2&&(c=JSON.parse(h)),c.apTemplate&&"object"==typeof c.apTemplate&&apLoadTemplate(c.apTemplate.name,c.apTemplate.template,function(f){apParseTemplate(c.apTemplate.name,c.apData,function(c){var f=a(c),h=parseInt(a(".aptip-data").length);g.data_id="aptipd-"+(h+1),f.addClass("aptip-data "+g.data_id),e.attr("data-ajax","."+g.data_id),a("body").append(f.clone()),tip.find(".ap-tooltip-in").html(f.show()),d(b)})}),g.ajax_running=!1}});else{var l=a("#"+h+"_card").html();tip.find(".ap-tooltip-in").html(a(l).show())}if(""!=f.before){var m=f.before;m(tip,b,function(){d(b)})}tip.appendTo("body"),d(b)}}var f=a.extend({theme:"",delay:"",title:"",before:"",ajax:"",position:"top center"},b);this.ajax_running=!1;var g=this;return this.each(function(){$this=a(this);var b=this;$this.mouseenter(function(){""!=f.delay?delay=setTimeout(function(){e(b)},f.delay):e(this)}).mouseleave(function(){"undefined"!=typeof tip&&tip.remove(),"undefined"!=typeof delay&&clearTimeout(delay)})}),this},a.fn.autogrow=function(b){function c(c){var d,e=a(this),f=e.innerHeight(),g=this.scrollHeight,h=e.data("autogrow-start-height")||0;if(g>f)this.scrollTop=0,b.animate?e.stop().animate({height:g},b.speed):e.innerHeight(g);else if(!c||8==c.which||46==c.which||c.ctrlKey&&88==c.which)if(f>h){d=e.clone().addClass(b.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(e.val()),e.after(d);do g=d[0].scrollHeight-1,d.innerHeight(g);while(g===d[0].scrollHeight);g++,d.remove(),e.focus(),h>g&&(g=h),f>g&&b.animate?e.stop().animate({height:g},b.speed):e.innerHeight(g)}else e.innerHeight(h)}var d=a(this).css({overflow:"hidden",resize:"none"}),e=d.selector,f={context:a(document),animate:!0,speed:50,fixMinHeight:!0,cloneClass:"autogrowclone",onInitialize:!1};return b=a.isPlainObject(b)?b:{context:b?b:a(document)},b=a.extend({},f,b),d.each(function(d,e){var f,g;e=a(e),e.is(":visible")||parseInt(e.css("height"),10)>0?f=parseInt(e.css("height"),10)||e.innerHeight():(g=e.clone().addClass(b.cloneClass).val(e.val()).css({position:"absolute",visibility:"hidden",display:"block"}),a("body").append(g),f=g.innerHeight(),g.remove()),b.fixMinHeight&&e.data("autogrow-start-height",f),e.css("height",f),b.onInitialize&&e.length&&c.call(e[0])}),b.context.on("keyup paste",e,c),d},a.fn.center=function(){return this.css({position:"fixed"}),a(window).height()>a(this).outerHeight()?this.css("top",Math.max(0,(a(window).height()-a(this).outerHeight())/2)+"px"):(this.css("top",50),this.css("height",a(window).height()-80)),this.css("left",Math.max(0,(a(window).width()-a(this).outerWidth())/2+a(window).scrollLeft())+"px"),this},a.fn.apAjaxQueryString=function(){var b=a(this).data("query").split("::"),c={};c.action="ap_ajax",c.ap_ajax_action=b[0],c.__nonce=b[1],c.args={};var d=0;return a.each(b,function(a){0!=a&&1!=a&&(c.args[d]=b[a],d++)}),c}}(jQuery);